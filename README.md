# Blog API — учебный проект на Spring Boot и Spring Data JPA

Учебный REST-API проект «мини-блог», написанный на **Spring Boot 3** и **Spring Data JPA**.  
Проект демонстрирует:

- работу с сущностями `User`, `Post`, `Tag`, `Comment`;
- использование **Spring Data JPA репозиториев** и своих DbStorage-обёрток;
- построение запросов: derived queries, `@Query` (JPQL), агрегации;
- разделение **Entity** и **DTO** (входные и выходные модели);
- базовую архитектуру: `Controller → Service → DbStorage → Repository → Entity`.

Используется встроенная база **H2**, так что проект можно просто запустить и сразу тестировать.

---

## Стек технологий

- **Java 17+**
- **Spring Boot 3**
- **Spring Web (REST API)**
- **Spring Data JPA**
- **H2 Database** (in-memory / file, для разработки)
- **Maven**

---

## Основные возможности

### Доменные сущности

- `User` — пользователь / автор постов  
- `Post` — пост в блоге
- `Tag` — тег (многие-ко-многим с постами)
- `Comment` — комментарий к посту

### Функциональность

- Создание поста с указанием:
  - `authorId`
  - `title`
  - `content`
  - списка тегов `tagNames` (создаются автоматически, если их ещё нет)
- Получение постов:
  - все посты автора
  - последние 3 поста автора
  - поиск по части заголовка (case-insensitive)
  - посты по имени тега
  - посты по email автора
  - посты за период по дате
  - посты без комментариев
- Статистика по тегам: имя тега + количество постов с этим тегом
- Удаление поста вместе со всеми его комментариями

---

## Архитектура проекта

Проект разделён на несколько уровней:

- `controller` — REST-контроллеры (`BlogController`)
- `service` — бизнес-логика (`BlogService`)
- `storage.*DbStorage` — обёртки над Spring Data репозиториями
- `storage.*Storage` — интерфейсы `JpaRepository<>`
- `model` — JPA-сущности (`User`, `Post`, `Tag`, `Comment`)
- `dto` — DTO-классы для запросов/ответов (`CreatePostRequestDTO`, `PostResponseDTO`, `AuthorDto`, `TagDto` и т.д.)
- `mapper` — маппинг Entity → DTO (`PostMapper`)

Такой подход позволяет:

- не светить наружу JPA-сущности напрямую;
- держать бизнес-логику в сервисах, а не в контроллерах;
- отдельно развивать слой доступа к данным.

---

## DTO-модели

### Вход: создание поста

**`CreatePostRequestDTO`**

```json
{
  "authorId": 4,
  "title": "Мой первый пост",
  "content": "Текст поста про Spring Data JPA",
  "tagNames": ["#spring", "#jpa"]
}
